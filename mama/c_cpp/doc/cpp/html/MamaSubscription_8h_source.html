<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OpenMAMA C++ API: MamaSubscription.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>MamaSubscription.h</h1><a href="MamaSubscription_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* $Id$</span>
<a name="l00002"></a>00002 <span class="comment"> *</span>
<a name="l00003"></a>00003 <span class="comment"> * OpenMAMA: The open middleware agnostic messaging API</span>
<a name="l00004"></a>00004 <span class="comment"> * Copyright (C) 2011 NYSE Technologies, Inc.</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * This library is free software; you can redistribute it and/or</span>
<a name="l00007"></a>00007 <span class="comment"> * modify it under the terms of the GNU Lesser General Public</span>
<a name="l00008"></a>00008 <span class="comment"> * License as published by the Free Software Foundation; either</span>
<a name="l00009"></a>00009 <span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * This library is distributed in the hope that it will be useful,</span>
<a name="l00012"></a>00012 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00013"></a>00013 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00014"></a>00014 <span class="comment"> * Lesser General Public License for more details.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> * You should have received a copy of the GNU Lesser General Public</span>
<a name="l00017"></a>00017 <span class="comment"> * License along with this library; if not, write to the Free Software</span>
<a name="l00018"></a>00018 <span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA</span>
<a name="l00019"></a>00019 <span class="comment"> * 02110-1301 USA</span>
<a name="l00020"></a>00020 <span class="comment"> */</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="preprocessor">#ifndef MAMA_SUBSCRIPTION_CPP_H__</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span><span class="preprocessor">#define MAMA_SUBSCRIPTION_CPP_H__</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="MamaBasicSubscription_8h.html">mama/MamaBasicSubscription.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;mama/subscription.h&quot;</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="keyword">namespace </span>Wombat 
<a name="l00029"></a>00029 {
<a name="l00030"></a>00030     <span class="keyword">class </span>MamaSubscriptionCallback;
<a name="l00031"></a>00031     <span class="keyword">class </span>MamaSource;
<a name="l00032"></a>00032     <span class="keyword">class </span>MamaSourceDerivative;
<a name="l00033"></a>00033 
<a name="l00034"></a>00034     <span class="keyword">struct </span>MamaSubscriptionImpl;
<a name="l00043"></a><a class="code" href="classWombat_1_1MamaSubscription.html">00043</a>     <span class="keyword">class </span>MAMACPPExpDLL <a class="code" href="classWombat_1_1MamaSubscription.html" title="The MamaSubscription interface represents a subscription to a topic.">MamaSubscription</a> : <span class="keyword">public</span> <a class="code" href="classWombat_1_1MamaBasicSubscription.html" title="The MamaBasicSubscription interface represents a subscription to a topic with no...">MamaBasicSubscription</a>
<a name="l00044"></a>00044     {
<a name="l00045"></a>00045     <span class="keyword">public</span>:
<a name="l00046"></a>00046         <span class="keyword">virtual</span> ~<a class="code" href="classWombat_1_1MamaSubscription.html" title="The MamaSubscription interface represents a subscription to a topic.">MamaSubscription</a> ();
<a name="l00047"></a>00047 
<a name="l00048"></a>00048         <span class="comment">/* Construct a MamaSubscription. MamaSubscription::createXXX() must be</span>
<a name="l00049"></a>00049 <span class="comment">         * called to activate the subscription.</span>
<a name="l00050"></a>00050 <span class="comment">         */</span>
<a name="l00051"></a>00051         <a class="code" href="classWombat_1_1MamaSubscription.html" title="The MamaSubscription interface represents a subscription to a topic.">MamaSubscription</a> (<span class="keywordtype">void</span>);
<a name="l00052"></a>00052 
<a name="l00053"></a>00053         <span class="keyword">virtual</span> <span class="keywordtype">void</span>              setCSubscription (mamaSubscription subscription);
<a name="l00054"></a>00054         <span class="keyword">virtual</span> mamaSubscription  getCSubscription ();
<a name="l00055"></a>00055             
<a name="l00066"></a>00066          <span class="keyword">virtual</span> <span class="keywordtype">void</span> setup (<a class="code" href="classWombat_1_1MamaTransport.html" title="The MamaTransport class provides market data functionality.">MamaTransport</a>*              transport,
<a name="l00067"></a>00067                              <a class="code" href="classWombat_1_1MamaQueue.html" title="Queue allows applications to dispatch events in order with multiple threads using...">MamaQueue</a>*                  queue,
<a name="l00068"></a>00068                              <a class="code" href="classWombat_1_1MamaSubscriptionCallback.html" title="The message callback interface.">MamaSubscriptionCallback</a>*   callback,
<a name="l00069"></a>00069                              <span class="keyword">const</span> <span class="keywordtype">char</span>*                 source,
<a name="l00070"></a>00070                              <span class="keyword">const</span> <span class="keywordtype">char</span>*                 symbol,
<a name="l00071"></a>00071                              <span class="keywordtype">void</span>*                       closure     = NULL);
<a name="l00072"></a>00072         
<a name="l00083"></a>00083          <span class="keyword">virtual</span> <span class="keywordtype">void</span> setup (<a class="code" href="classWombat_1_1MamaQueue.html" title="Queue allows applications to dispatch events in order with multiple threads using...">MamaQueue</a>*                  queue,
<a name="l00084"></a>00084                              <a class="code" href="classWombat_1_1MamaSubscriptionCallback.html" title="The message callback interface.">MamaSubscriptionCallback</a>*   callback,
<a name="l00085"></a>00085                              <a class="code" href="classWombat_1_1MamaSource.html" title="A MAMA source maintains information about a data source, including the quality of...">MamaSource</a>*                 source,
<a name="l00086"></a>00086                              <span class="keyword">const</span> <span class="keywordtype">char</span>*                 symbol,
<a name="l00087"></a>00087                              <span class="keywordtype">void</span>*                       closure     = NULL);
<a name="l00088"></a>00088 
<a name="l00120"></a>00120          <span class="keyword">virtual</span> <span class="keywordtype">void</span> activate ();
<a name="l00121"></a>00121 
<a name="l00126"></a>00126          <span class="keyword">virtual</span> <span class="keywordtype">void</span> deactivate ();   
<a name="l00127"></a>00127         
<a name="l00128"></a>00128 
<a name="l00140"></a>00140          <span class="keyword">virtual</span> <span class="keywordtype">void</span> create (<a class="code" href="classWombat_1_1MamaTransport.html" title="The MamaTransport class provides market data functionality.">MamaTransport</a>*              transport,
<a name="l00141"></a>00141                               <a class="code" href="classWombat_1_1MamaQueue.html" title="Queue allows applications to dispatch events in order with multiple threads using...">MamaQueue</a>*                  queue,
<a name="l00142"></a>00142                               <a class="code" href="classWombat_1_1MamaSubscriptionCallback.html" title="The message callback interface.">MamaSubscriptionCallback</a>*   callback,
<a name="l00143"></a>00143                               <span class="keyword">const</span> <span class="keywordtype">char</span>*                 source,
<a name="l00144"></a>00144                               <span class="keyword">const</span> <span class="keywordtype">char</span>*                 symbol,
<a name="l00145"></a>00145                               <span class="keywordtype">void</span>*                       closure     = NULL);
<a name="l00146"></a>00146         
<a name="l00158"></a>00158          <span class="keyword">virtual</span> <span class="keywordtype">void</span> create (<a class="code" href="classWombat_1_1MamaQueue.html" title="Queue allows applications to dispatch events in order with multiple threads using...">MamaQueue</a>*                  queue,
<a name="l00159"></a>00159                               <a class="code" href="classWombat_1_1MamaSubscriptionCallback.html" title="The message callback interface.">MamaSubscriptionCallback</a>*   callback,
<a name="l00160"></a>00160                               <a class="code" href="classWombat_1_1MamaSource.html" title="A MAMA source maintains information about a data source, including the quality of...">MamaSource</a>*                 source,
<a name="l00161"></a>00161                               <span class="keyword">const</span> <span class="keywordtype">char</span>*                 symbol,
<a name="l00162"></a>00162                               <span class="keywordtype">void</span>*                       closure     = NULL);
<a name="l00163"></a>00163 
<a name="l00177"></a>00177         <span class="keyword">virtual</span> <span class="keywordtype">void</span> createSnapshot (<a class="code" href="classWombat_1_1MamaTransport.html" title="The MamaTransport class provides market data functionality.">MamaTransport</a>*               transport,
<a name="l00178"></a>00178                                      <a class="code" href="classWombat_1_1MamaQueue.html" title="Queue allows applications to dispatch events in order with multiple threads using...">MamaQueue</a>*                   queue,
<a name="l00179"></a>00179                                      <a class="code" href="classWombat_1_1MamaSubscriptionCallback.html" title="The message callback interface.">MamaSubscriptionCallback</a>*    callback,
<a name="l00180"></a>00180                                      <span class="keyword">const</span> <span class="keywordtype">char</span>*                  source,
<a name="l00181"></a>00181                                      <span class="keyword">const</span> <span class="keywordtype">char</span>*                  symbol,
<a name="l00182"></a>00182                                      <span class="keywordtype">void</span>*                        closure = NULL);
<a name="l00183"></a>00183 
<a name="l00191"></a>00191         <span class="keyword">virtual</span> <span class="keywordtype">void</span> setRequiresInitial (<span class="keywordtype">bool</span> requiresInitial);
<a name="l00192"></a>00192 
<a name="l00196"></a>00196         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> getRequiresInitial (<span class="keywordtype">void</span>);
<a name="l00197"></a>00197 
<a name="l00201"></a>00201         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> getReceivedInitial (<span class="keywordtype">void</span>);
<a name="l00202"></a>00202 
<a name="l00211"></a>00211         <span class="keyword">virtual</span> <span class="keywordtype">void</span> setRetries (<span class="keywordtype">int</span> retries);
<a name="l00212"></a>00212 
<a name="l00216"></a>00216         <span class="keyword">virtual</span> <span class="keywordtype">int</span> getRetries (<span class="keywordtype">void</span>);
<a name="l00217"></a>00217 
<a name="l00223"></a>00223         <span class="keyword">virtual</span> <span class="keywordtype">void</span> setSubscriptionType (mamaSubscriptionType type);
<a name="l00224"></a>00224 
<a name="l00228"></a>00228         <span class="keyword">virtual</span> mamaSubscriptionType getSubscriptionType (<span class="keywordtype">void</span>);
<a name="l00229"></a>00229 
<a name="l00233"></a>00233         <span class="keyword">virtual</span> <span class="keywordtype">long</span> getServiceLevelOpt (<span class="keywordtype">void</span>);
<a name="l00234"></a>00234 
<a name="l00242"></a>00242         <span class="keyword">virtual</span> <span class="keywordtype">void</span> setServiceLevel (mamaServiceLevel svcLevel, 
<a name="l00243"></a>00243                                       <span class="keywordtype">long</span>             svcLevelOpt);
<a name="l00244"></a>00244 
<a name="l00248"></a>00248         <span class="keyword">virtual</span> mamaServiceLevel getServiceLevel (<span class="keywordtype">void</span>);
<a name="l00249"></a>00249 
<a name="l00255"></a>00255         <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>*  getSymbol (<span class="keywordtype">void</span>) <span class="keyword">const</span>;
<a name="l00256"></a>00256 
<a name="l00257"></a>00257         <span class="keyword">virtual</span> <a class="code" href="classWombat_1_1MamaSubscriptionCallback.html" title="The message callback interface.">MamaSubscriptionCallback</a>*   getCallback (<span class="keywordtype">void</span>) <span class="keyword">const</span>;
<a name="l00258"></a>00258         
<a name="l00263"></a>00263         <span class="keyword">virtual</span> <span class="keywordtype">void</span> setSymbol (<span class="keyword">const</span> <span class="keywordtype">char</span>* symbol);
<a name="l00264"></a>00264 
<a name="l00271"></a>00271         <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="classWombat_1_1MamaSourceDerivative.html" title="A MamaSourceDerivative provides a reference to a common MamaSource object but can...">MamaSourceDerivative</a>*  getSourceDerivative (<span class="keywordtype">void</span>) <span class="keyword">const</span>;
<a name="l00272"></a>00272 
<a name="l00279"></a>00279         <span class="keyword">virtual</span> <a class="code" href="classWombat_1_1MamaSourceDerivative.html" title="A MamaSourceDerivative provides a reference to a common MamaSource object but can...">MamaSourceDerivative</a>*  getSourceDerivative (<span class="keywordtype">void</span>);
<a name="l00280"></a>00280 
<a name="l00286"></a>00286         <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="classWombat_1_1MamaSource.html" title="A MAMA source maintains information about a data source, including the quality of...">MamaSource</a>*  getSource (<span class="keywordtype">void</span>) <span class="keyword">const</span>;
<a name="l00287"></a>00287 
<a name="l00293"></a>00293         <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>*  getSubscSource (<span class="keywordtype">void</span>) <span class="keyword">const</span>;
<a name="l00294"></a>00294 
<a name="l00301"></a>00301         <span class="keyword">virtual</span> <span class="keywordtype">void</span> setTimeout (<span class="keywordtype">double</span> timeout);
<a name="l00302"></a>00302 
<a name="l00306"></a>00306         <span class="keyword">virtual</span> <span class="keywordtype">double</span> getTimeout (<span class="keywordtype">void</span>);
<a name="l00307"></a>00307 
<a name="l00314"></a>00314         <span class="keyword">virtual</span> <span class="keywordtype">void</span> setRecoverGaps (<span class="keywordtype">bool</span> recover);
<a name="l00315"></a>00315 
<a name="l00322"></a>00322         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> getRecoverGaps (<span class="keywordtype">void</span>) <span class="keyword">const</span>;
<a name="l00323"></a>00323 
<a name="l00329"></a>00329         <span class="keyword">virtual</span> <span class="keywordtype">void</span> setAppDataType (uint8_t dataType);
<a name="l00330"></a>00330 
<a name="l00336"></a>00336         <span class="keyword">virtual</span> uint8_t getAppDataType () <span class="keyword">const</span>;
<a name="l00337"></a>00337 
<a name="l00343"></a>00343         <span class="keyword">virtual</span> <span class="keywordtype">void</span> setGroupSizeHint (<span class="keywordtype">int</span> groupSizeHint); 
<a name="l00344"></a>00344 
<a name="l00357"></a>00357         <span class="keyword">virtual</span> <span class="keywordtype">void</span> setItemClosure (<span class="keywordtype">void</span>*  closure);
<a name="l00358"></a>00358 
<a name="l00366"></a>00366         <span class="keyword">virtual</span> <span class="keywordtype">void</span>* getItemClosure (<span class="keywordtype">void</span>);
<a name="l00367"></a>00367          
<a name="l00379"></a>00379         <span class="keyword">virtual</span> <span class="keywordtype">void</span> setPreInitialCacheSize (<span class="keywordtype">int</span> cacheSize);
<a name="l00380"></a>00380         
<a name="l00386"></a>00386         <span class="keyword">virtual</span> <span class="keywordtype">int</span> getPreInitialCacheSize (<span class="keywordtype">void</span>);
<a name="l00387"></a>00387 
<a name="l00406"></a>00406         <span class="keyword">virtual</span> <span class="keywordtype">void</span> setMsgQualifierFilter (<span class="keywordtype">bool</span> ignoreDefinitelyDuplicate,
<a name="l00407"></a>00407                                             <span class="keywordtype">bool</span> ignorePossiblyDuplicate,
<a name="l00408"></a>00408                                             <span class="keywordtype">bool</span> ignoreDefinitelyDelyaed,
<a name="l00409"></a>00409                                             <span class="keywordtype">bool</span> ignorePossiblyDelayed,
<a name="l00410"></a>00410                                             <span class="keywordtype">bool</span> ignoreOutOfSequence);
<a name="l00411"></a>00411 
<a name="l00431"></a>00431         <span class="keyword">virtual</span> <span class="keywordtype">void</span> getMsgQualifierFilter (<span class="keywordtype">bool</span> &amp;ignoreDefinitelyDuplicate,
<a name="l00432"></a>00432                                             <span class="keywordtype">bool</span> &amp;ignorePossiblyDuplicate,
<a name="l00433"></a>00433                                             <span class="keywordtype">bool</span> &amp;ignoreDefinitelyDelyaed,
<a name="l00434"></a>00434                                             <span class="keywordtype">bool</span> &amp;ignorePossiblyDelayed,
<a name="l00435"></a>00435                                             <span class="keywordtype">bool</span> &amp;ignoreOutOfSequence) <span class="keyword">const</span>;
<a name="l00436"></a>00436 
<a name="l00443"></a>00443         <span class="keyword">virtual</span> <span class="keywordtype">void</span> destroy ();
<a name="l00444"></a>00444 
<a name="l00454"></a>00454         <span class="keyword">virtual</span> <span class="keywordtype">void</span> destroyEx();
<a name="l00455"></a>00455 
<a name="l00456"></a>00456     <span class="keyword">private</span>:
<a name="l00457"></a>00457 
<a name="l00458"></a>00458         <span class="comment">/* Private functions. */</span>    
<a name="l00459"></a>00459         <span class="keyword">static</span> <span class="keywordtype">void</span> MAMACALLTYPE onSubscriptionCreate       (mamaSubscription subscription, 
<a name="l00460"></a>00460                                                              <span class="keywordtype">void</span>             *closure);
<a name="l00461"></a>00461 
<a name="l00462"></a>00462         <span class="keyword">static</span> <span class="keywordtype">void</span> MAMACALLTYPE onSubscriptionDestroy      (mamaSubscription subscription, 
<a name="l00463"></a>00463                                                              <span class="keywordtype">void</span>             *closure);
<a name="l00464"></a>00464 
<a name="l00465"></a>00465         <span class="keyword">static</span> <span class="keywordtype">void</span> MAMACALLTYPE onSubscriptionError        (mamaSubscription subscription, 
<a name="l00466"></a>00466                                                              mama_status      status, 
<a name="l00467"></a>00467                                                              <span class="keywordtype">void</span>             *platformError, 
<a name="l00468"></a>00468                                                              <span class="keyword">const</span> <span class="keywordtype">char</span>       *subject, 
<a name="l00469"></a>00469                                                              <span class="keywordtype">void</span>             *closure);
<a name="l00470"></a>00470 
<a name="l00471"></a>00471         <span class="keyword">static</span> <span class="keywordtype">void</span> MAMACALLTYPE onSubscriptionGap          (mamaSubscription subscription, 
<a name="l00472"></a>00472                                                              <span class="keywordtype">void</span>*            closure);
<a name="l00473"></a>00473 
<a name="l00474"></a>00474         <span class="keyword">static</span> <span class="keywordtype">void</span> MAMACALLTYPE onSubscriptionMessage      (mamaSubscription subscription, 
<a name="l00475"></a>00475                                                              mamaMsg          msg, 
<a name="l00476"></a>00476                                                              <span class="keywordtype">void</span>             *closure, 
<a name="l00477"></a>00477                                                              <span class="keywordtype">void</span>             *topicClosure);
<a name="l00478"></a>00478 
<a name="l00479"></a>00479         <span class="keyword">static</span> <span class="keywordtype">void</span> MAMACALLTYPE onSubscriptionQuality      (mamaSubscription subscription, 
<a name="l00480"></a>00480                                                              mamaQuality      quality, 
<a name="l00481"></a>00481                                                              <span class="keyword">const</span> <span class="keywordtype">char</span>       *symbol, 
<a name="l00482"></a>00482                                                              <span class="keywordtype">short</span>            cause, 
<a name="l00483"></a>00483                                                              <span class="keyword">const</span> <span class="keywordtype">void</span>       *platformInfo, 
<a name="l00484"></a>00484                                                              <span class="keywordtype">void</span>             *closure);
<a name="l00485"></a>00485 
<a name="l00486"></a>00486         <span class="keyword">static</span> <span class="keywordtype">void</span> MAMACALLTYPE onSubscriptionRecapRequest (mamaSubscription subscription, 
<a name="l00487"></a>00487                                                              <span class="keywordtype">void</span>*            closure);    
<a name="l00488"></a>00488 
<a name="l00489"></a>00489         <span class="comment">// The callback class passed to the create function</span>
<a name="l00490"></a>00490         <a class="code" href="classWombat_1_1MamaSubscriptionCallback.html" title="The message callback interface.">MamaSubscriptionCallback</a> *mCallback;
<a name="l00491"></a>00491 
<a name="l00492"></a>00492         <span class="comment">// The source derivative</span>
<a name="l00493"></a>00493         <a class="code" href="classWombat_1_1MamaSourceDerivative.html" title="A MamaSourceDerivative provides a reference to a common MamaSource object but can...">MamaSourceDerivative</a> *mSourceDeriv;    
<a name="l00494"></a>00494         MamaSubscriptionImpl    *mImpl;
<a name="l00495"></a>00495     };
<a name="l00496"></a>00496 
<a name="l00497"></a>00497 } <span class="comment">// namespace Wombat</span>
<a name="l00498"></a>00498 <span class="preprocessor">#endif // MAMA_SUBSCRIPTION_CPP_H__</span>
</pre></div></div>
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<!--BEGIN GENERATE_TREEVIEW-->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    $navpath
    <li class="footer">
    <span>&copy; 2014 Linux Technologies</span>
  </ul>
</div>
<!--END GENERATE_TREEVIEW-->
<!--BEGIN !GENERATE_TREEVIEW-->
<hr class="footer"/><address class="footer"><small>
$generatedby &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="$relpath^doxygen.png" alt="doxygen"/>
</a> 1.6.1
</small></address>
<!--END !GENERATE_TREEVIEW-->
</body>
</html>
